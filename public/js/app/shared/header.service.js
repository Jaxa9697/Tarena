"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Created by Jahongir on 13-Apr-17.
 */
var core_1 = require("@angular/core");
var http_1 = require("@angular/http");
require("rxjs/add/operator/toPromise");
require("rxjs/Rx");
var components_model_1 = require("./components.model");
var HeaderService = (function () {
    function HeaderService(http) {
        this.http = http;
    }
    HeaderService.prototype.getAtcContent = function () {
        return this.http.get('/getAtcContent')
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getWOContent = function (query) {
        return this.http.get(query)
            .map(function (data) {
            return data.json();
        }).map(function (data) {
            var rows = [];
            if (data) {
                data.forEach(function (el, i) {
                    var row = new components_model_1.Wifi((i + 1), el.ID, el.type, el.name_cl, el.itMan, el.address, el.n_passport, el.telephone, el.phone, el.ipAddress, el.vlan, el.id_client);
                    rows.push(row);
                });
            }
            return rows;
        });
    };
    HeaderService.prototype.getVlanContent = function () {
        return this.http.get('/getVlanContent')
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getPrivilegeContent = function () {
        return this.http.get('/getPrivilegeContent')
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getUserPrivileges = function (user, number) {
        var pAtc = new components_model_1.CRUD(user.p_atc).getcrud();
        var pVlan = new components_model_1.CRUD(user.p_vlan).getcrud();
        var pReport = new components_model_1.CRUD(user.p_report).getcrud();
        var pWifi = new components_model_1.CRUD(user.p_wifi).getcrud();
        var pOptics = new components_model_1.CRUD(user.p_optics).getcrud();
        return new components_model_1.Privilege(user.ID, number, user.username, user.status, pAtc, pVlan, pReport, pWifi, pOptics, false);
    };
    HeaderService.prototype.logoff = function () {
        return this.http.get('/logoff')
            .map(function () {
            window.location.reload();
        });
    };
    HeaderService.prototype.getReportContent = function () {
        return this.http.get('/getReportContent')
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getProblemContent = function () {
        var _this = this;
        return this.http.get('/getProblemContent')
            .map(function (data) {
            return data.json();
        }).map(function (data) {
            var problems = [];
            data.forEach(function (el, i) {
                var createDate = _this.getDate(new Date(el.createDate));
                var solveDate = _this.getDate(new Date(el.solveDate));
                if (!el.solveDate) {
                    solveDate = '';
                }
                var problem = new components_model_1.Problem(el.ID, (i + 1), createDate, solveDate, el.username, el.problem, !!el.solveDate, false);
                problems.push(problem);
            });
            return problems;
        });
    };
    HeaderService.prototype.getSignContent = function () {
        return this.http.get('/getSignContent')
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getVlanList = function () {
        return this.http.get('/getVlanList')
            .map(function (data) {
            return data.json();
        }).map(function (data) {
            return {
                vlans: Object.values(data.vlan),
                atcs: Object.values(data.atc)
            };
        });
    };
    HeaderService.prototype.getAtcContentById = function (id) {
        return this.http.get('/getAtcContentById?id=' + id.toString())
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getClientsByVlan = function (vlan) {
        return this.http.get('/getClientsByVlan?id=' + vlan.id.toString())
            .map(function (data) {
            return data.json();
        }).map(function (data) {
            var quantity = 255 - Number(vlan.subnetMask.split(".")[3]);
            var gatewayArray = vlan.gateway.split(".");
            var idNode = Number(gatewayArray[3]);
            gatewayArray.splice(-1, 1);
            var networkNode = gatewayArray.join().replace(/,/g, ".");
            var isData;
            var client;
            var clients = [];
            for (var i = 1; i <= quantity; i++) {
                var ip = networkNode + "." + (idNode + i);
                for (var j = 0; j < data.length; j++) {
                    if (data[j].ipAddress == ip) {
                        isData = true;
                        client = new components_model_1.VlansClients(i, data[j].name_cl, data[j].telephone, data[j].ipAddress);
                        break;
                    }
                    else {
                        isData = false;
                    }
                }
                if (!isData) {
                    client = new components_model_1.VlansClients(i, '', '', ip);
                }
                clients.push(client);
            }
            return clients;
        });
    };
    HeaderService.prototype.addNewVlan = function (obj) {
        var body = JSON.stringify(obj);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.post('/addNewVlan', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.addNewAtc = function (obj) {
        var body = JSON.stringify(obj);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.post('/addNewAtc', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.addNewWO = function (obj) {
        var body = JSON.stringify(obj);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.post('/addNewWO', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.deleteVlan = function (id) {
        return this.http.delete('/deleteVlan?id=' + id)
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.deleteAtc = function (id) {
        return this.http.delete('/deleteAtc?id=' + id)
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.deleteWO = function (id) {
        return this.http.delete('/deleteWO?id=' + id)
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.updateVlan = function (obj) {
        var body = JSON.stringify(obj);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.put('/updateVlan', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.updateAtc = function (obj) {
        var body = JSON.stringify(obj);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.put('/updateAtc', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.updateWO = function (obj) {
        var body = JSON.stringify(obj);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.put('/updateWO', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.saveReport = function (data) {
        var body = JSON.stringify(data);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.post('/saveReport', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.saveNewProblem = function (data) {
        var body = JSON.stringify(data);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.post('/saveNewProblem', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.filterReportRows = function (data) {
        var body = JSON.stringify(data);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.post('/filterReportRows', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.saveUserPrivileges = function (user) {
        var body = JSON.stringify(user);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.put('/saveUserPrivileges', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.solvingProblem = function (data) {
        var body = JSON.stringify(data);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.put('/saveSolvedProblem', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.searchData = function (query) {
        return this.http.get('/searchData?query=' + query)
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getResultSearch = function (id) {
        return this.http.get('/getResultSearch?id=' + id.toString())
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.changePassword = function (password) {
        var body = JSON.stringify(password);
        var headers = new http_1.Headers({ 'Content-Type': 'application/json;charset=utf-8' });
        return this.http.put('/changePassword', body, { headers: headers })
            .map(function (data) {
            return data.json();
        });
    };
    HeaderService.prototype.getDate = function (date) {
        var day = date.getDate(), month = date.getMonth() + 1, year = date.getFullYear(), hour = date.getHours(), minute = date.getMinutes();
        // second = date.getSeconds();
        if (month < 10) {
            month = '0' + month;
        }
        if (day < 10) {
            day = '0' + day;
        }
        if (hour < 10) {
            hour = '0' + hour;
        }
        if (minute < 10) {
            minute = '0' + minute;
        }
        // if (second < 10){ second = '0' + second; }
        return year + "-" + month + "-" + day + " " + hour + ":" + minute;
    };
    return HeaderService;
}());
HeaderService = __decorate([
    core_1.Injectable(),
    __metadata("design:paramtypes", [http_1.Http])
], HeaderService);
exports.HeaderService = HeaderService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL1RhcmVuYTIvYXNzZXRzL2FwcC9zaGFyZWQvaGVhZGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7R0FFRztBQUNILHNDQUEyQztBQUMzQyxzQ0FBeUQ7QUFFekQsdUNBQXFDO0FBQ3JDLG1CQUFpQjtBQUNqQix1REFHNEI7QUFHNUIsSUFBYSxhQUFhO0lBQ3hCLHVCQUFxQixJQUFVO1FBQVYsU0FBSSxHQUFKLElBQUksQ0FBTTtJQUM3QixDQUFDO0lBRUgscUNBQWEsR0FBYjtRQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQzthQUNuQyxHQUFHLENBQUMsVUFBQyxJQUFjO1lBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsb0NBQVksR0FBWixVQUFhLEtBQUs7UUFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQzthQUN4QixHQUFHLENBQUMsVUFBQyxJQUFjO1lBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsSUFBSTtZQUNWLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNkLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUM7Z0JBQ1AsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFDLEVBQUUsRUFBQyxDQUFDO29CQUNoQixJQUFJLEdBQUcsR0FBRyxJQUFJLHVCQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsT0FBTyxF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QUksSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsRUFDNUIsSUFBSSxHQUFLLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFDM0IsSUFBSSxHQUFLLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFDeEIsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUMzQiw4QkFBOEI7UUFFaEMsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQztRQUFDLENBQUM7UUFDeEMsRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFHLENBQUM7WUFBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUFDLENBQUM7UUFDcEMsRUFBRSxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFFLENBQUM7WUFBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztRQUFDLENBQUM7UUFDdEMsRUFBRSxDQUFDLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQyxDQUFBLENBQUM7WUFBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQztRQUFDLENBQUM7UUFDMUMsNkNBQTZDO1FBRTdDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQztJQUNwRSxDQUFDO0lBQ0gsb0JBQUM7QUFBRCxDQTFVQSxBQTBVQyxJQUFBO0FBMVVZLGFBQWE7SUFEekIsaUJBQVUsRUFBRTtxQ0FFZ0IsV0FBSTtHQURwQixhQUFhLENBMFV6QjtBQTFVWSxzQ0FBYSIsImZpbGUiOiJzaGFyZWQvaGVhZGVyLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBKYWhvbmdpciBvbiAxMy1BcHItMTcuXHJcbiAqL1xyXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEh0dHAsIFJlc3BvbnNlLCBIZWFkZXJzIH0gZnJvbSAgXCJAYW5ndWxhci9odHRwXCI7XHJcblxyXG5pbXBvcnQgJ3J4anMvYWRkL29wZXJhdG9yL3RvUHJvbWlzZSc7XHJcbmltcG9ydCAncnhqcy9SeCc7XHJcbmltcG9ydCB7XHJcbiAgQXRjLCBDUlVELCBQcm9ibGVtLCBWbGFuLCBWbGFuc0NsaWVudHMsIFdpZmksIFByaXZpbGVnZSwgQ2hhbmdlUGFzc3dvcmQsIFNpZ24sXHJcbiAgRmlsdGVyXHJcbn0gZnJvbSBcIi4vY29tcG9uZW50cy5tb2RlbFwiO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgSGVhZGVyU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IgKHByaXZhdGUgaHR0cDogSHR0cFxyXG4gICl7fVxyXG5cclxuICBnZXRBdGNDb250ZW50KCl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldCgnL2dldEF0Y0NvbnRlbnQnKVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRXT0NvbnRlbnQocXVlcnkpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQocXVlcnkpXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KS5tYXAoKGRhdGEpPT57XHJcbiAgICAgICAgbGV0IHJvd3MgPSBbXTtcclxuICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgIGRhdGEuZm9yRWFjaCgoZWwsaSk9PntcclxuICAgICAgICAgICAgbGV0IHJvdyA9IG5ldyBXaWZpKChpKzEpLCBlbC5JRCwgZWwudHlwZSwgZWwubmFtZV9jbCwgZWwuaXRNYW4sIGVsLmFkZHJlc3MsIGVsLm5fcGFzc3BvcnQsXHJcbiAgICAgICAgICAgICAgZWwudGVsZXBob25lLCBlbC5waG9uZSwgZWwuaXBBZGRyZXNzLCBlbC52bGFuLCBlbC5pZF9jbGllbnQpO1xyXG4gICAgICAgICAgIHJvd3MucHVzaChyb3cpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcm93cztcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRWbGFuQ29udGVudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJy9nZXRWbGFuQ29udGVudCcpXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFByaXZpbGVnZUNvbnRlbnQoKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCcvZ2V0UHJpdmlsZWdlQ29udGVudCcpXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJQcml2aWxlZ2VzKHVzZXIsIG51bWJlcil7XHJcbiAgICBsZXQgcEF0YyAgICA9IG5ldyBDUlVEKHVzZXIucF9hdGMpLmdldGNydWQoKTtcclxuICAgIGxldCBwVmxhbiAgID0gbmV3IENSVUQodXNlci5wX3ZsYW4pLmdldGNydWQoKTtcclxuICAgIGxldCBwUmVwb3J0ID0gbmV3IENSVUQodXNlci5wX3JlcG9ydCkuZ2V0Y3J1ZCgpO1xyXG4gICAgbGV0IHBXaWZpICAgPSBuZXcgQ1JVRCh1c2VyLnBfd2lmaSkuZ2V0Y3J1ZCgpO1xyXG4gICAgbGV0IHBPcHRpY3MgPSBuZXcgQ1JVRCh1c2VyLnBfb3B0aWNzKS5nZXRjcnVkKCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcml2aWxlZ2UodXNlci5JRCwgbnVtYmVyLCB1c2VyLnVzZXJuYW1lLCB1c2VyLnN0YXR1cywgcEF0YyxcclxuICAgICAgcFZsYW4sIHBSZXBvcnQsIHBXaWZpLCBwT3B0aWNzLCBmYWxzZSk7XHJcblxyXG4gIH1cclxuXHJcbiAgbG9nb2ZmKCl7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldCgnL2xvZ29mZicpXHJcbiAgICAgIC5tYXAoKCk9PntcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmVwb3J0Q29udGVudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJy9nZXRSZXBvcnRDb250ZW50JylcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvYmxlbUNvbnRlbnQoKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCcvZ2V0UHJvYmxlbUNvbnRlbnQnKVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSkubWFwKChkYXRhKT0+e1xyXG4gICAgICAgIGxldCBwcm9ibGVtczogUHJvYmxlbVtdID0gW107XHJcblxyXG4gICAgICAgIGRhdGEuZm9yRWFjaCgoZWwsIGkpPT57XHJcbiAgICAgICAgICBsZXQgY3JlYXRlRGF0ZSA9IHRoaXMuZ2V0RGF0ZShuZXcgRGF0ZShlbC5jcmVhdGVEYXRlKSk7XHJcbiAgICAgICAgICBsZXQgc29sdmVEYXRlID0gdGhpcy5nZXREYXRlKG5ldyBEYXRlKGVsLnNvbHZlRGF0ZSkpO1xyXG5cclxuICAgICAgICAgIGlmKCFlbC5zb2x2ZURhdGUpeyBzb2x2ZURhdGUgPSAnJzsgfVxyXG5cclxuICAgICAgICAgIGxldCBwcm9ibGVtID0gbmV3IFByb2JsZW0oZWwuSUQsIChpKzEpLCBjcmVhdGVEYXRlLFxyXG4gICAgICAgICAgICBzb2x2ZURhdGUsIGVsLnVzZXJuYW1lLCBlbC5wcm9ibGVtLCAhIWVsLnNvbHZlRGF0ZSwgZmFsc2UgKTtcclxuXHJcbiAgICAgICAgICBwcm9ibGVtcy5wdXNoKHByb2JsZW0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvYmxlbXM7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0U2lnbkNvbnRlbnQoKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCcvZ2V0U2lnbkNvbnRlbnQnKVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRWbGFuTGlzdCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJy9nZXRWbGFuTGlzdCcpXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KS5tYXAoKGRhdGEpPT57XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHZsYW5zOiAoPGFueT5PYmplY3QpLnZhbHVlcyhkYXRhLnZsYW4pLFxyXG4gICAgICAgICAgYXRjczogKDxhbnk+T2JqZWN0KS52YWx1ZXMoZGF0YS5hdGMpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEF0Y0NvbnRlbnRCeUlkKGlkOiBudW1iZXIpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJy9nZXRBdGNDb250ZW50QnlJZD9pZD0nICsgaWQudG9TdHJpbmcoKSlcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2xpZW50c0J5Vmxhbih2bGFuOiBWbGFuKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCcvZ2V0Q2xpZW50c0J5Vmxhbj9pZD0nICsgdmxhbi5pZC50b1N0cmluZygpKVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSkubWFwKChkYXRhKT0+e1xyXG5cclxuICAgICAgICAgIGxldCBxdWFudGl0eSA9IDI1NSAtIE51bWJlcih2bGFuLnN1Ym5ldE1hc2suc3BsaXQoXCIuXCIpWzNdKTtcclxuICAgICAgICAgIGxldCBnYXRld2F5QXJyYXkgPSB2bGFuLmdhdGV3YXkuc3BsaXQoXCIuXCIpO1xyXG5cclxuICAgICAgICAgIGxldCBpZE5vZGUgPSBOdW1iZXIoZ2F0ZXdheUFycmF5WzNdKTtcclxuICAgICAgICAgIGdhdGV3YXlBcnJheS5zcGxpY2UoLTEsMSk7XHJcbiAgICAgICAgICBsZXQgbmV0d29ya05vZGUgPSBnYXRld2F5QXJyYXkuam9pbigpLnJlcGxhY2UoLywvZywgXCIuXCIpO1xyXG5cclxuICAgICAgICAgIGxldCBpc0RhdGE6IGJvb2xlYW47XHJcbiAgICAgICAgICBsZXQgY2xpZW50OiBWbGFuc0NsaWVudHM7XHJcbiAgICAgICAgICBsZXQgY2xpZW50czogVmxhbnNDbGllbnRzW10gPSBbXTtcclxuXHJcbiAgICAgICAgICBmb3IgKGxldCBpPTE7IGkgPD0gcXVhbnRpdHk7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBpcCA9IG5ldHdvcmtOb2RlICsgXCIuXCIgKyAoaWROb2RlICsgaSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGogPCBkYXRhLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICBpZiAoZGF0YVtqXS5pcEFkZHJlc3MgPT0gaXApe1xyXG4gICAgICAgICAgICAgICAgaXNEYXRhID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNsaWVudCA9IG5ldyBWbGFuc0NsaWVudHMoaSwgZGF0YVtqXS5uYW1lX2NsLCBkYXRhW2pdLnRlbGVwaG9uZSwgZGF0YVtqXS5pcEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNEYXRhID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZighaXNEYXRhKXtcclxuICAgICAgICAgICAgICBjbGllbnQgPSBuZXcgVmxhbnNDbGllbnRzKGksICcnLCAnJywgaXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNsaWVudHMucHVzaChjbGllbnQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBjbGllbnRzO1xyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld1ZsYW4ob2JqOiBWbGFuKXtcclxuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShvYmopO1xyXG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoJy9hZGROZXdWbGFuJywgYm9keSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0F0YyhvYmo6IEF0Yyl7XHJcbiAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcclxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KCcvYWRkTmV3QXRjJywgYm9keSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZE5ld1dPKG9iajogQXRjKXtcclxuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShvYmopO1xyXG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoJy9hZGROZXdXTycsIGJvZHksIHsgaGVhZGVyczogaGVhZGVycyB9KVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVWbGFuKGlkOiBudW1iZXIpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUoJy9kZWxldGVWbGFuP2lkPScgKyBpZClcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQXRjKGlkOiBudW1iZXIpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUoJy9kZWxldGVBdGM/aWQ9JyArIGlkKVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVXTyhpZDogbnVtYmVyKXtcclxuICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKCcvZGVsZXRlV08/aWQ9JyArIGlkKVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVWbGFuKG9iajogVmxhbil7XHJcbiAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcclxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQoJy91cGRhdGVWbGFuJywgYm9keSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUF0YyhvYmo6IEF0Yyl7XHJcbiAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcclxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQoJy91cGRhdGVBdGMnLCBib2R5LCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlV08ob2JqOiBBdGMpe1xyXG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KG9iaik7XHJcbiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmh0dHAucHV0KCcvdXBkYXRlV08nLCBib2R5LCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2F2ZVJlcG9ydChkYXRhKXtcclxuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KCcvc2F2ZVJlcG9ydCcsIGJvZHksIHsgaGVhZGVyczogaGVhZGVycyB9KVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzYXZlTmV3UHJvYmxlbShkYXRhKXtcclxuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KCcvc2F2ZU5ld1Byb2JsZW0nLCBib2R5LCB7IGhlYWRlcnM6IGhlYWRlcnMgfSlcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZmlsdGVyUmVwb3J0Um93cyhkYXRhOiBGaWx0ZXIpe1xyXG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoJy9maWx0ZXJSZXBvcnRSb3dzJywgYm9keSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHNhdmVVc2VyUHJpdmlsZWdlcyh1c2VyOiBQcml2aWxlZ2Upe1xyXG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHVzZXIpO1xyXG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnB1dCgnL3NhdmVVc2VyUHJpdmlsZWdlcycsIGJvZHksIHsgaGVhZGVyczogaGVhZGVycyB9KVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzb2x2aW5nUHJvYmxlbShkYXRhKXtcclxuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wdXQoJy9zYXZlU29sdmVkUHJvYmxlbScsIGJvZHksIHsgaGVhZGVyczogaGVhZGVycyB9KVxyXG4gICAgICAubWFwKChkYXRhOiBSZXNwb25zZSApPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZWFyY2hEYXRhKHF1ZXJ5OiBzdHJpbmcpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJy9zZWFyY2hEYXRhP3F1ZXJ5PScgKyBxdWVyeSlcclxuICAgICAgLm1hcCgoZGF0YTogUmVzcG9uc2UgKT0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmVzdWx0U2VhcmNoKGlkOiBudW1iZXIpe1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoJy9nZXRSZXN1bHRTZWFyY2g/aWQ9JyArIGlkLnRvU3RyaW5nKCkpXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZVBhc3N3b3JkKHBhc3N3b3JkOiBDaGFuZ2VQYXNzd29yZCl7XHJcbiAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkocGFzc3dvcmQpO1xyXG4gICAgbGV0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JyB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5odHRwLnB1dCgnL2NoYW5nZVBhc3N3b3JkJywgYm9keSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pXHJcbiAgICAgIC5tYXAoKGRhdGE6IFJlc3BvbnNlICk9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldERhdGUoZGF0ZSl7XHJcbiAgICBsZXQgZGF5ICA9IGRhdGUuZ2V0RGF0ZSgpLFxyXG4gICAgICBtb250aCAgPSBkYXRlLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICB5ZWFyICAgPSBkYXRlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgIGhvdXIgICA9IGRhdGUuZ2V0SG91cnMoKSxcclxuICAgICAgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgIC8vIHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpO1xyXG5cclxuICAgIGlmIChtb250aCA8IDEwKSB7IG1vbnRoID0gJzAnICsgbW9udGg7IH1cclxuICAgIGlmIChkYXkgPCAxMCkgICB7IGRheSA9ICcwJyArIGRheTsgfVxyXG4gICAgaWYgKGhvdXIgPCAxMCkgIHsgaG91ciA9ICcwJyArIGhvdXI7IH1cclxuICAgIGlmIChtaW51dGUgPCAxMCl7IG1pbnV0ZSA9ICcwJyArIG1pbnV0ZTsgfVxyXG4gICAgLy8gaWYgKHNlY29uZCA8IDEwKXsgc2Vjb25kID0gJzAnICsgc2Vjb25kOyB9XHJcblxyXG4gICAgcmV0dXJuIHllYXIgKyBcIi1cIiArIG1vbnRoICsgXCItXCIgKyBkYXkgKyBcIiBcIiArIGhvdXIgKyBcIjpcIiArIG1pbnV0ZTtcclxuICB9XHJcbn1cclxuIl19
